<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="es" xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>El bus SPI | Arduino para 4º de ESO </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="content-language" content="es" />
<meta name="author" content="Ángel Millán León" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.5 - exelearning.net" />
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-98"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<div id="header" ><div id="headerContent">Arduino para 4º de ESO</div></div>
<div id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Arduineando en la E.S.O.</a></li>
   <li><a href="introduccin.html" class="no-ch">Introducción</a></li>
   <li><a href="ide_de_arduino.html" class="no-ch">IDE de Arduino</a></li>
   <li><a href="lenguaje_de_programacin.html" class="no-ch">Lenguaje de programación</a></li>
   <li class="current-page-parent"><a href="programacin_con_arduino.html" class="current-page-parent daddy">Programación con Arduino</a>
   <ul>
      <li><a href="salidas_digitales.html" class="daddy">Salidas digitales</a>
      <ul class="other-section">
         <li><a href="hola_mundo_led_blink.html" class="no-ch">Hola mundo: led blink</a></li>
         <li><a href="semforo_para_trfico_rodado.html" class="no-ch">Semáforo para tráfico rodado</a></li>
         <li><a href="led_rgb.html" class="no-ch">LED RGB</a></li>
         <li><a href="semforo_con_led_rgb.html" class="no-ch">Semáforo con LED RGB</a></li>
         <li><a href="coche_fantstico.html" class="daddy">Coche fantástico</a>
         <ul class="other-section">
            <li><a href="programa_a_lo_bestia.html" class="no-ch">Programa "a lo bestia"</a></li>
            <li><a href="programa_elegante_uso_del_bucle_for.html" class="no-ch">Programa "elegante": uso del bucle for</a></li>
            <li><a href="otro_elegante_uso_de_la_instruccin_while.html" class="no-ch">Otro elegante: uso de la instrucción "while"</a></li>
         </ul>
         </li>
         <li><a href="display_de_siete_segmentos.html" class="no-ch">Display de siete segmentos</a></li>
         <li><a href="registros_de_desplazamiento.html" class="no-ch">Registros de desplazamiento</a></li>
      </ul>
      </li>
      <li><a href="entradas_digitales.html" class="daddy">Entradas digitales</a>
      <ul class="other-section">
         <li><a href="led_encendido_mediante_pulsador.html" class="no-ch">LED encendido mediante pulsador</a></li>
         <li><a href="semforo_con_pulsador.html" class="no-ch">Semáforo con pulsador</a></li>
      </ul>
      </li>
      <li><a href="entradas_analgicas.html" class="daddy">Entradas analógicas</a>
      <ul class="other-section">
         <li><a href="lectura_de_una_ldr.html" class="no-ch">Lectura de una LDR</a></li>
         <li><a href="lectura_de_un_potencimetro.html" class="no-ch">Lectura de un potenciómetro</a></li>
         <li><a href="botonera_digital_en_entrada_analgica.html" class="no-ch">Botonera digital en entrada analógica</a></li>
      </ul>
      </li>
      <li><a href="seales_pwm.html" class="daddy">Señales PWM</a>
      <ul class="other-section">
         <li><a href="control_de_servomotores.html" class="no-ch">Control de servomotores</a></li>
      </ul>
      </li>
      <li><a href="control_de_un_motor_dc.html" class="daddy">Control de un motor DC</a>
      <ul class="other-section">
         <li><a href="el_circuito_integrado_l293d.html" class="no-ch">El circuito integrado L293D</a></li>
      </ul>
      </li>
      <li><a href="el_puerto_serie.html" class="no-ch">El puerto serie</a></li>
      <li><a href="control_de_rels.html" class="no-ch">Control de relés</a></li>
      <li><a href="sensores.html" class="daddy">Sensores</a>
      <ul class="other-section">
         <li><a href="sensor_tctil_capacitivo.html" class="no-ch">Sensor táctil capacitivo</a></li>
         <li><a href="tcrt5000.html" class="no-ch">TCRT5000</a></li>
         <li><a href="hcsr04.html" class="daddy">HC-SR04</a>
         <ul class="other-section">
            <li><a href="medir_distancias_con_hcsr04.html" class="no-ch">Medir distancias con HC-SR04</a></li>
         </ul>
         </li>
         <li><a href="lm35.html" class="no-ch">LM35</a></li>
      </ul>
      </li>
      <li><a href="usando_libreras.html" class="daddy">Usando librerías</a>
      <ul class="other-section">
         <li><a href="dht11.html" class="no-ch">DHT11</a></li>
         <li><a href="teclado_matricial.html" class="no-ch">Teclado matricial</a></li>
         <li><a href="sensor_infrarrojo_vs1838.html" class="no-ch">Sensor infrarrojo VS1838</a></li>
         <li><a href="sensor_capacitivo.html" class="no-ch">Sensor capacitivo</a></li>
      </ul>
      </li>
      <li><a href="multiplexacin.html" class="no-ch">Multiplexación</a></li>
      <li id="active"><a href="el_bus_spi.html" class="active daddy">El bus SPI</a>
      <ul>
         <li><a href="matriz_de_ledes_8x8.html" class="no-ch">Matriz de ledes 8x8</a></li>
      </ul>
      </li>
      <li><a href="el_bus_i2c.html" class="daddy">El bus I2C</a>
      <ul class="other-section">
         <li><a href="matriz_de_ledes_8x80.html" class="no-ch">Matriz de ledes 8x8</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="shields_arduino.html" class="daddy">Shields Arduino</a>
   <ul class="other-section">
      <li><a href="imagina_tdr_steam.html" class="no-ch">Imagina TdR Steam</a></li>
      <li><a href="edubsica.html" class="daddy">EduBásica</a>
      <ul class="other-section">
         <li><a href="tests_de_la_tarjeta.html" class="no-ch">Tests de la tarjeta</a></li>
      </ul>
      </li>
      <li><a href="arduino_basic_io_v2.html" class="daddy">Arduino Basic I/O V2</a>
      <ul class="other-section">
         <li><a href="programas.html" class="no-ch">Programas</a></li>
      </ul>
      </li>
      <li><a href="echidnashield.html" class="no-ch">Echidnashield</a></li>
      <li><a href="kiwibot.html" class="no-ch">Kiwibot</a></li>
      <li><a href="richshield.html" class="daddy">RichShield</a>
      <ul class="other-section">
         <li><a href="ejemplos.html" class="no-ch">Ejemplos</a></li>
      </ul>
      </li>
      <li><a href="picuino.html" class="no-ch">Picuino</a></li>
      <li><a href="multifunction_shield.html" class="daddy">Multifunction shield</a>
      <ul class="other-section">
         <li><a href="ejemplos0.html" class="no-ch">Ejemplos</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="simuladores_de_arduino.html" class="daddy">Simuladores de Arduino</a>
   <ul class="other-section">
      <li><a href="unoardusim.html" class="no-ch">UnoArduSim</a></li>
      <li><a href="picsimlab.html" class="no-ch">PicSimLab</a></li>
      <li><a href="circuitoio.html" class="no-ch">Circuito.io</a></li>
   </ul>
   </li>
   <li><a href="programacin_grfica_de_arduino.html" class="daddy">Programación gráfica de Arduino</a>
   <ul class="other-section">
      <li><a href="arduinoblocks.html" class="no-ch">Arduinoblocks</a></li>
      <li><a href="visualino.html" class="no-ch">Visualino</a></li>
      <li><a href="ardublock.html" class="no-ch">Ardublock</a></li>
      <li><a href="mblock.html" class="no-ch">mBlock</a></li>
      <li><a href="bitbloq.html" class="no-ch">BitBloq</a></li>
      <li><a href="snap4arduino.html" class="no-ch">Snap4Arduino</a></li>
      <li><a href="kittenblock.html" class="no-ch">Kittenblock</a></li>
      <li><a href="s4a_scratch_4_arduino.html" class="daddy">S4A (Scratch 4 Arduino)</a>
      <ul class="other-section">
         <li><a href="proyectos_con_s4a.html" class="no-ch">Proyectos con S4A</a></li>
         <li><a href="vdeos_de_inters.html" class="no-ch">Vídeos de interés</a></li>
      </ul>
      </li>
      <li><a href="mixly.html" class="no-ch">Mixly</a></li>
      <li><a href="otros_entornos_visuales.html" class="daddy">Otros entornos visuales</a>
      <ul class="other-section">
         <li><a href="ardublockly.html" class="no-ch">Ardublockly</a></li>
         <li><a href="easyarduino.html" class="no-ch">EasyArduino</a></li>
         <li><a href="minibloq.html" class="no-ch">Minibloq</a></li>
         <li><a href="scratchx.html" class="no-ch">ScratchX</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="arduinopc.html" class="daddy">Arduino+PC</a>
   <ul class="other-section">
      <li><a href="myopenlab.html" class="no-ch">MyOpenLab</a></li>
      <li><a href="labview.html" class="no-ch">LabView</a></li>
      <li><a href="labview_nxg.html" class="no-ch">LabView NXG</a></li>
   </ul>
   </li>
   <li><a href="proyectos.html" class="daddy">Proyectos</a>
   <ul class="other-section">
      <li><a href="generacin_de_sonido.html" class="no-ch">Generación de sonido</a></li>
      <li><a href="cucoclock.html" class="no-ch">Cucoclock</a></li>
      <li><a href="pinza_robtica_con_servos_leantec.html" class="no-ch">Pinza robótica con servos (LEANTEC)</a></li>
      <li><a href="control_de_maquetas_reales.html" class="no-ch">Control de maquetas reales</a></li>
      <li><a href="barrera_de_aparcamiento.html" class="no-ch">Barrera de aparcamiento</a></li>
      <li><a href="puerta_de_cochera.html" class="no-ch">Puerta de cochera</a></li>
      <li><a href="puente_levadizo.html" class="no-ch">Puente levadizo</a></li>
      <li><a href="ascensor.html" class="no-ch">Ascensor</a></li>
      <li><a href="3_eso_proyectos_santillana.html" class="daddy">3º E.S.O.: Proyectos Santillana</a>
      <ul class="other-section">
         <li><a href="simular_latidos_de_un_corazn.html" class="no-ch">Simular latidos de un corazón</a></li>
         <li><a href="encender_dos_ledes_alternativamente.html" class="no-ch">Encender dos ledes alternativamente</a></li>
         <li><a href="semforo_con_ledes.html" class="no-ch">Semáforo con ledes</a></li>
         <li><a href="mostrar_informacin_en_un_display_de_7_segmentos.html" class="no-ch">Mostrar información en un display de 7 segmentos</a></li>
         <li><a href="producir_sonido_con_un_altavoz.html" class="no-ch">Producir sonido con un altavoz</a></li>
         <li><a href="reproducir_distintas_notas.html" class="no-ch">Reproducir distintas notas</a></li>
         <li><a href="reproducir_una_meloda.html" class="no-ch">Reproducir una melodía</a></li>
         <li><a href="encender_un_led_con_un_pulsador.html" class="no-ch">Encender un LED con un pulsador</a></li>
         <li><a href="encender_un_led_con_un_pulsador_pullup.html" class="no-ch">Encender un LED con un pulsador pull-up</a></li>
         <li><a href="dejar_encendido_un_led_con_un_pulsador_pulldown.html" class="no-ch">Dejar encendido un LED con un pulsador pull-down</a></li>
         <li><a href="crear_un_juego_el_duelo_de_reflejos.html" class="no-ch">Crear un juego: el duelo de reflejos</a></li>
         <li><a href="generar_un_dado_electrnico.html" class="no-ch">Generar un dado electrónico</a></li>
         <li><a href="construye_un_reloj_digital.html" class="no-ch">Construye un reloj digital</a></li>
      </ul>
      </li>
      <li><a href="tinkercad_3_eso.html" class="daddy">TinkerCAD 3º E.S.O.</a>
      <ul class="other-section">
         <li><a href="1_hola_mundo_led_blink.html" class="no-ch">1. Hola mundo: LED blink</a></li>
         <li><a href="2_ledes_alternativos.html" class="no-ch">2. Ledes alternativos</a></li>
         <li><a href="3_coche_fantstico.html" class="no-ch">3. Coche fantástico</a></li>
         <li><a href="4_semforo_para_trfico_rodado.html" class="no-ch">4. Semáforo para tráfico rodado</a></li>
         <li><a href="5_semforo_para_trfico_rodado_y_peatones.html" class="no-ch">5. Semáforo para tráfico rodado y peatones</a></li>
         <li><a href="6_semforo_con_pulsador.html" class="no-ch">6. Semáforo con pulsador</a></li>
      </ul>
      </li>
      <li><a href="4_eso_proyectos_santillana.html" class="daddy">4º E.S.O.: Proyectos Santillana</a>
      <ul class="other-section">
         <li><a href="semforo_con_ledes_de_colores.html" class="no-ch">Semáforo con ledes de colores</a></li>
         <li><a href="encender_un_led_con_un_pulsador0.html" class="no-ch">Encender un led con un pulsador</a></li>
         <li><a href="dejar_encendido_un_led.html" class="no-ch">Dejar encendido un LED</a></li>
         <li><a href="leer_el_valor_proporcionado_por_una_ldr.html" class="no-ch">Leer el valor proporcionado por una LDR</a></li>
         <li><a href="crear_una_funcin_para_medir_ultrasonidos.html" class="no-ch">Crear una función para medir ultrasonidos</a></li>
         <li><a href="construir_una_lmpara_de_efectos_rgb.html" class="no-ch">Construir una lámpara de efectos RGB</a></li>
         <li><a href="construir_un_acelerador.html" class="no-ch">Construir un acelerador</a></li>
         <li><a href="controlar_totalmente_un_motor_de_corriente_continua.html" class="no-ch">Controlar totalmente un motor de corriente continua</a></li>
         <li><a href="programar_un_limpiaparabrisas.html" class="no-ch">Programar un limpiaparabrisas</a></li>
         <li><a href="construye_un_girasol.html" class="no-ch">Construye un girasol</a></li>
      </ul>
      </li>
      <li><a href="tinkercad_4_eso.html" class="daddy">TinkerCAD 4º E.S.O.</a>
      <ul class="other-section">
         <li><a href="1_hola_mundo_led_blink0.html" class="no-ch">1. Hola mundo: LED Blink</a></li>
         <li><a href="2_ledes_alternativos0.html" class="no-ch">2. Ledes alternativos</a></li>
         <li><a href="3_coche_fantstico0.html" class="no-ch">3. Coche fantástico</a></li>
         <li><a href="4_semforo_para_trfico_rodado0.html" class="no-ch">4. Semáforo para tráfico rodado</a></li>
         <li><a href="5_semforo_para_vehculos_y_peatones.html" class="no-ch">5. Semáforo para vehículos y peatones</a></li>
         <li><a href="6_entradas_digitales_pulsador.html" class="no-ch">6. Entradas digitales: pulsador</a></li>
         <li><a href="8_puerta_not.html" class="no-ch">8. Puerta NOT</a></li>
         <li><a href="91_puerta_or.html" class="no-ch">9.1. Puerta OR</a></li>
         <li><a href="92_puerta_and.html" class="no-ch">9.2. Puerta AND</a></li>
         <li><a href="93_puerta_nor.html" class="no-ch">9.3. Puerta NOR</a></li>
         <li><a href="94_puerta_nand.html" class="no-ch">9.4. Puerta NAND</a></li>
      </ul>
      </li>
      <li><a href="ms_proyectos.html" class="daddy">Más proyectos</a>
      <ul class="other-section">
         <li><a href="cubo_de_ledes_2x2x2.html" class="no-ch">Cubo de ledes 2x2x2</a></li>
         <li><a href="luces_aleatorias.html" class="no-ch">Luces aleatorias</a></li>
         <li><a href="detector_de_aparcamiento_con_ultrasonidos.html" class="no-ch">Detector de aparcamiento con ultrasonidos</a></li>
         <li><a href="led_rgb_crepuscular.html" class="no-ch">LED RGB crepuscular</a></li>
         <li><a href="semforo_con_micrfono.html" class="no-ch">Semáforo con micrófono</a></li>
      </ul>
      </li>
   </ul>
   </li>
   <li><a href="ms_info.html" class="daddy">Más info</a>
   <ul class="other-section">
      <li><a href="oye_maker_diy_construye_tu_arduino.html" class="no-ch">Oye, Maker, DIY: construye tu Arduino</a></li>
      <li><a href="control_bluetooth_de_un_brazo_robtico.html" class="no-ch">Control bluetooth de un brazo robótico</a></li>
      <li><a href="prcticas_educativas_con_arduino.html" class="no-ch">Prácticas educativas con Arduino</a></li>
      <li><a href="robtica_fcil_con_arduino_anbal_de_la_torre.html" class="no-ch">Robótica fácil con Arduino (Aníbal de la Torre)</a></li>
   </ul>
   </li>
</ul>
</div>
<div id='topPagination'>
<div class="pagination noprt">
<a href="multiplexacin.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="matriz_de_ledes_8x8.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
<div id="main-wrapper">
<div id="main"><a name="main"></a>
<div id="nodeDecoration"><h1 id="nodeTitle">El bus SPI</h1></div>
<div class="iDevice_wrapper objectivesIdevice em_iDevice" id="id183">
<div class="iDevice emphasis1" >
<div class="iDevice_header"><h2 class="iDeviceTitle">EL BUS SPI, UNA SOLUCIÓN SÍNCRONA</h2></div>
<div class="iDevice_inner">
<div class="iDevice_content_wrapper">
<div id="ta183_183_2" class="block iDevice_content">
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">El SPI es un protocolo de comunicación  síncrona de 4 hilos, entre dispositivos electrónicos presentado por Motorola en 1982, que ha ganado bastante aceptación en la industria como sistema de comunicación de muy corta distancia, normalmente dentro la placa de circuito impreso.</span></p>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Es un protocolo de transmisión que permite alcanzar velocidades muy altas y que se diseñó pensando en comunicar un micro controlador con distintos periféricos y que funciona a full dúplex (Una forma retorcida de decir que puede enviar y recibir datos al mismo tiempo).</span></p>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">SPI utiliza una solución síncrona, porque utiliza unas líneas diferentes para los datos y el Clock. El Clock es una señal que indica al que escucha exactamente cuándo leer las líneas de datos, con lo que el problema de perdida de sincronía se elimina de raíz.</span></p>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><img src="ClkYData.png" width="400" height="225" alt="Clock y Data" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Por eso mismo, no se necesita pactar  la velocidad de transmisión, ya que será el Clock quien fije la velocidad y puede ser variable a lo largo de la comunicación sin que sea un problema (Aunque por supuesto según el dispositivo habrá un límite de velocidad).</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Uno de los motivos por los que SPI es tan popular es que el hardware de recepción puede ser un sencillo Shift register como los que vimos en la sesión N,  Lo que es una solución mucho más simple (Y barata) que una UART (Universal Asíncronous Receiver Transmitter o  sistema universal asíncrono de recepción y transmisión serie) de comunicación serie.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><strong>CÓMO SE RECIBEN LOS DATOS</strong></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">En un bus SPI una de las partes genera el Clock al que llamamos master, y el resto son los esclavos, pudiendo haber uno o varios en el bus. A la señal de reloj se le suele llamar CLK por Clock o SCK por Serial Clock.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Cuando el master envía información, lo hace por una línea de datos que normalmente de nombre MOSI (Master Out Slave In) y si el esclavo responde lo hace a través de una línea llamada MISO (Master In Slave Out) siguiendo una de esas tradiciones de imaginación desbordante en los nombres tecnológicos.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><a href="https://www.prometec.net/wp-content/uploads/2014/11/Img_54_3.png"><img src="lineas.png" width="500" height="354" alt="Lineas SCK MOSI y MISO" style="display: block; margin-left: auto; margin-right: auto;" /></a></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Como es el master quien genera el Clock, necesita saber de antemano, si un esclavo va a devolver una respuesta y de que longitud, para mantener el Clock hasta que la transferencia esté completa.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Esto no es normalmente un problema porque cuando el master pide a, digamos un sensor, que le envié una lectura, normalmente sabemos que van ser 2 bytes.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><strong>SELECCIÓN DE ESCLAVO SLAVE SELECT SS</strong></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Hay una última línea de control, llamada Slave Select o SS, que indica a un esclavo que el mensaje que viene es para él, o bien que se reclama que envié una respuesta a una petición del master.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><a href="https://www.prometec.net/wp-content/uploads/2014/11/Img_54_4.png"><img src="sck.png" width="500" height="425" alt="SCK, MOSI, MISO y SS lines" style="display: block; margin-left: auto; margin-right: auto;" /></a></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">La línea SS normalmente se mantiene HIGH y se activa con LOW, lo que despierta al esclavo seleccionado. Cuando se termina la transferencia la línea se levanta a HIGH y el esclavo se desactiva.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><strong>BUS CON MÚLTIPLES ESCLAVOS</strong></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Hay dos maneras de conectar múltiples esclavos a un bus SPI. Con una línea SS por cada esclavo o en cascada:</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">En general cada esclavo requiere su propia línea SS para ser activado, y así evitar que dos hablen a la vez, porque el resultado sería ruido inútil. Basta con activar la línea correspondiente y el esclavo esta listo para recibir sus órdenes</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Es un sistema cómodo, siempre y cuando no sean muchos esclavos porque podemos necesitar muchas líneas.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><a href="https://www.prometec.net/wp-content/uploads/2014/11/Img_54_5.png"><img src="multiples.png" width="500" height="260" alt="Multiple Slave Select" style="display: block; margin-left: auto; margin-right: auto;" /></a></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Cuando el número de esclavos crece suele ser más frecuente conectarlos en cascada, con el MISO de uno (Salida), conectado al MOSI (Entrada) del siguiente. En este caso solo usamos una única línea SS, que se comparte entre todos los esclavos.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Esta configuración es típica de una situación en la que le master envía datos pero no recibe nada de vuelta, como en el caso de una cadena de múltiples  display LEDs ( Matrices de 8×8) , en los que se envía información para ser mostrada pero, no hay datos de vuelta. En este caso incluso podemos desconectar la línea MISO</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><a href="https://www.prometec.net/wp-content/uploads/2014/11/Img_54_6.png"><img src="daisy.png" width="500" height="220" alt="Daisy chain en el bus SPI" style="display: block; margin-left: auto; margin-right: auto;" /></a></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Por último y para cerrar esta sesión, comentar que naturalmente vuestro Arduino soporta de serie el bus SPI, con una librería estándar que sorprendentemente se llama SPI y que podéis instalar tranquilamente, que gestiona todas las complicaciones y el arbitraje del protocolo.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><strong>COMPARACIÓN CON I2C Y CON PUERTO SERIE NORMAL</strong></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><em><strong>Ventajas del Bus SPI</strong></em></span></p>
<ul style="text-align: justify;">
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Comunicación Full Dúplex. Envía y recibe a la vez lo que aumenta la velocidad.</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Más rápido que el I2C y que el puerto Serie asíncrono normal</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">El tamaño de los mensajes puede ser arbitrariamente grande</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Se requiere un hardware sencillo (Léase barato)</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Requiere un menor consumo y menor electrónica de conexión que el I2C</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Como el Clock lo proporciona el master, los esclavos no necesitan osciladores ( O sea, otra vez más barato)</span><br /><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"> </span></li>
</ul>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Y como en la vida no hay nada gratis, las <em><strong>desventajas</strong> </em>son:</span></p>
<ul style="text-align: justify;">
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"> Necesita más pines que el I2C o el Puerto serie normal.</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Las comunicaciones tiene que estar perfectamente establecidas de antemano. No puedes enviar mensajes de diferentes longitudes cuando te convenga.</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">No hay señal de conforme del esclavo, se espera que obedezca y punto.</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Master único y casi sin posibilidad de master múltiple</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Funciona solo en distancias muy cortas</span></li>
<li><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Normalmente necesita un pin adicional por cada esclavo y si el número de esta creces puede acabar siendo un problema.</span><br /><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"> </span></li>
</ul>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><strong>PINES SPI EN ARDUINO</strong></span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Aunque últimamente han aparecido algunas librerías que nos permiten mover de sitio los pines de control del SPI en nuestros Arduino, tradicionalmente estos, estaban fijados a unos ciertos pines.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Eso significa, que para controlar el bus SPI es necesario usar esos pines inexcusablemente, aunque podemos elegir entre dos juegos de ellos, entre ciertos pines digitales, según el modelo y la tabla que especificamos abajo, y usando los equivalentes en el bus ICSP.</span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Esos pines son:</span></p>
<div style="direction: ltr; text-align: justify;">
<table border="1" cellpadding="0" cellspacing="0" valign="top" style="direction: ltr; border-collapse: collapse; border: 1pt solid #a3a3a3; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="background-color: #666667; vertical-align: top; width: 1.3673in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: white; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">MODELO ARDUINO</span></p>
</td>
<td style="background-color: #666667; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: white; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">MOSI</span></p>
</td>
<td style="background-color: #666667; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: white; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">MISO</span></p>
</td>
<td style="background-color: #666667; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: white; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">SCK</span></p>
</td>
<td style="background-color: #666667; vertical-align: top; width: .7534in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: white; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">SS SLAVE</span></p>
</td>
<td style="background-color: #666667; vertical-align: top; width: .8013in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: white; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">SS MASTER</span></p>
</td>
</tr>
<tr>
<td style="background-color: #f3f3f3; vertical-align: top; width: 1.3479in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">UNO</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .8125in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">11, ICSP-4</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .8125in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">12, ICSP-1</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .8125in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">13, ICSP-3</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .734in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">10</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .6972in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Z</span></p>
</td>
</tr>
<tr>
<td style="background-color: #f3f3f3; vertical-align: top; width: 1.3479in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">MEGA</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .8125in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">51, ICSP-4</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .8125in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">50, ICSP-1</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .8125in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">52, ICSP-3</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .734in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">53</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .6972in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Z</span></p>
</td>
</tr>
<tr>
<td style="background-color: #f3f3f3; vertical-align: top; width: 1.3479in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Leonardo</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">ICSP-4</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">ICSP-1</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">ICSP-3</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .734in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Z</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .6972in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">z</span></p>
</td>
</tr>
<tr>
<td style="background-color: #f3f3f3; vertical-align: top; width: 1.3479in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">DUE</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">ICSP-4</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">ICSP-1</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .793in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">ICSP-3</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .734in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">z</span></p>
</td>
<td style="background-color: #f3f3f3; vertical-align: top; width: .7152in; padding: 4pt 4pt 4pt 4pt; border: 1pt solid #A3A3A3;">
<p style="margin: 0in; font-family: Calibri; font-size: 10.5pt; color: #5a5a5a; text-align: center;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">4,10,52</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"> </span></p>
<p style="text-align: justify;"><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Fíjate que aunque los pines del bus SPI cambian según el modelo de Arduino que usemos, siempre son los mismos en el ICSP.</span><br /><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Eso permite diseñar shields coherentes con todos los modelos de Arduino.</span><br /><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;">Los pines ICSP son esos que están a la derecha centrados cuando leemos los rótulos en la placa: </span></p>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><img src="ardu.jpg" alt="" title="Bus SPI en Arduino" width="450" height="383" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"><img src="icsp.jpg" alt="" title="Pines ICSP en Arduino Uno" width="249" height="94" style="display: block; margin-left: auto; margin-right: auto;" /></span></p>
<p><span style="font-size: 14pt; font-family: verdana, geneva, sans-serif;"> </span></p>
<p></p>
</div>
</div>
</div>
</div>
</div>
<div id="packageLicense" class="cc cc-by-nc-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Licencia Creative Commons Reconocimiento No comercial Compartir igual 4.0</a></p>
</div>
</div>
</div>
<div id='bottomPagination'>
<div class="pagination noprt">
<a href="multiplexacin.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="matriz_de_ledes_8x8.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</div>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>